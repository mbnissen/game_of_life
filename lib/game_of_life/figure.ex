defmodule GameOfLife.Figure do
  defp to_cells(text) do
    text
    |> String.split("\n", trim: true)
    |> Enum.with_index(1)
    |> Enum.map(fn {line, y} ->
      String.graphemes(line)
      |> Enum.with_index(1)
      |> Enum.map(fn
        {"O", x} -> {x, y}
        {".", _} -> nil
      end)
      |> Enum.filter(&(!is_nil(&1)))
    end)
    |> List.flatten()
  end

  def figure101() do
    """
    ....OO......OO....
    ...O.O......O.O...
    ...O..........O...
    OO.O..........O.OO
    OO.O.O..OO..O.O.OO
    ...O.O.O..O.O.O...
    ...O.O.O..O.O.O...
    OO.O.O..OO..O.O.OO
    OO.O..........O.OO
    ...O..........O...
    ...O.O......O.O...
    ....OO......OO....
    """
    |> to_cells()
  end

  def spaceship() do
    """
    .............OO.....................................
    .....OO....OO.O.O...................................
    ....OOO....OOOO.....................................
    ...OO......OO.....O.................................
    ..OO..OO...O..O..O..................................
    .OO.....O.......O..OO...............................
    .OO.O...OOOO........................................
    ....O...OO..OO.O....................................
    .....OOO....O.O.....................................
    ......OO...OO..O....................................
    ......O.....O.......................................
    .OOOO.O..O..O...O...................................
    .OOO...OOOOO..OOOOOOO.O.............................
    O.O....O..........O..OO.............................
    OOO.O...O...O.....OOO...............................
    .......O.O..O.......OO..............................
    .O...O.....OO........OO..O.O........................
    ....O.......O........OOO.O.OOO......................
    ...O........OOO......O....O.........................
    .....O......O.O.....O.O.............................
    .....O......O.OO...O....O...........................
    .............O.OOOO...O.....O..O....................
    ............OO..OO.O.O...O.OOO......................
    .................O......O..OOO...OOO................
    ....................O..O......OO....................
    ................OO....O..O..........OO..............
    ..................O.............O...O...............
    ................OO....OO........O...................
    .................O...OOO........O.O.O.O.............
    .................O....OO........O.....OO............
    ........................O........O..OOO.............
    .....................O..O........O........O.........
    ..........................OOOO........OO...O........
    .......................O......OO......OO...O........
    .......................O....O............O..........
    .......................O...............O............
    .........................OO.O.O.......O..O..........
    .........................O....O.........OOO.........
    ............................OOO.OO..O...O...O.OO....
    .............................O..OO.O.....O...O..O...
    .....................................OO..O...O......
    ..................................O.OO.OO.O..OO...O.
    ...............................O.....O...O.......O.O
    ................................OO............OO...O
    ......................................O.......OO....
    .......................................OOO...OO..O..
    ......................................O..O.OOO......
    ......................................O....OO.......
    .......................................O............
    ..........................................O..O......
    .........................................O..........
    ..........................................OO........
    """
    |> to_cells()
  end
end
